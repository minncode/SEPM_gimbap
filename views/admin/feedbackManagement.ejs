<!-- feedbackManagement.ejs -->

<%- include("../partials/header") %>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/stylesheets/adminNavbar.css">
<link rel="stylesheet" href="/stylesheets/adminManagement.css">

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<title>Feedback: Admin</title>
</head>

<%- include("../partials/adminNavigation") %>

    <!-- main -->
    <div class="adminCourseManageContents">
        <h1>Feedback Management</h1>
        <form action="/admin/feedbackManagement" method="get">
        <div class="search2">
            <input type="text" name="search" placeholder="Search by Type of Feedback, Feedback Details">
            <button class="submitBtn" type="submit">
                <ion-icon class="searchIcon2" name="search-outline"></ion-icon>
            </button>

        </div>
        </form>
<!-- Display Feedback List -->
<br>
<table>
    <tr>
        <th>Type of Feedback
            <span class="sort-arrow" onclick="sortTable('typeOfFeedback', 'asc')">&#9650;</span>
            <span class="sort-arrow" onclick="sortTable('typeOfFeedback', 'desc')">&#9660;</span>
        </th>
        <th>Feedback Details
            <span class="sort-arrow" onclick="sortTable('feedbackDetails', 'asc')">&#9650;</span>
            <span class="sort-arrow" onclick="sortTable('feedbackDetails', 'desc')">&#9660;</span>
        </th>
        <th>Submission Time
            <span class="sort-arrow" onclick="sortTable('submissionTime', 'asc')">&#9650;</span>
            <span class="sort-arrow" onclick="sortTable('submissionTime', 'desc')">&#9660;</span>
        </th>
    </tr>
    <% for (let i = 0; i < feedbackList.length; i++) { %>
        <tr>
            <td><%= feedbackList[i].typeOfFeedback %></td>
            <td><%= feedbackList[i].feedbackDetails %></td>
            <td><%= feedbackList[i].submissionTime.toISOString().split('T')[0] %></td>
        </tr>
    <% } %>
</table>
    </div>
</body>

<script>
    function sortTable(field, order) {
    window.location.href = `/admin/feedbackManagement?sort=${field}&order=${order}`;
}
</script>

</html>
