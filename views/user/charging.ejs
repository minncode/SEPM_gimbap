<%- include("../partials/header") %>

<link rel="stylesheet" href="/stylesheets/charging.css">

<title>RMITdays</title>
    
</head>
<body>

  <header>
    <div class="header">
      <img class="logo" src="/images/rmitlogo.png" alt="RMIT logo">
      <h2>RMIT Pay</h2>
    </div>
    <a class="delete-btn" href="paymentMain"><ion-icon name="close-outline"></ion-icon></ion-icon></a>
  </header>
  <div class="mainContent">
    <h2>Select the plan you want to charge</h2>
    <div class="chargeButtons">
      <form action="/charging" method="post">
        <button class="chargeButton" onclick="openPopup(50000)" name="amount" value="50000">VND <br> 50,000</button>
        <button class="chargeButton" onclick="openPopup(100000)" name="amount" value="100000">VND <br> 100,000</button>
        <button class="chargeButton" onclick="openPopup(200000)" name="amount" value="200000">VND <br> 200,000</button>
        <button class="chargeButton" onclick="openPopup(500000)" name="amount" value="500000">VND <br> 500,000</button>
        <button class="chargeButton" onclick="openPopup(800000)" name="amount" value="800000">VND <br> 800,000</button>
        <button class="chargeButton" onclick="openPopup(1000000)" name="amount" value="1000000">VND <br> 1,000,000</button>
      </form>
    </div>
        <!-- charging confirm popup -->
        <div class="hide" id="chargeModal">
          <div class="modal-content">
            
            <h2>Confirm your action</h2>
            <p id="chargeAmount" style="color:black;"></p>
            <button class="confirmButton" onclick="confirmCharge()">Charge</button>
            <button class="confirmButton" onclick="cancelCharging()">Cancel</button>
          </div>
        </div>
        <div class="hide" id="successModal">
          <div class="modalContent">
            
            <h2>Charging succeeded</h2>
            <p>Your payment has been successfully processed.</p>
            <button onclick="gotoPaymentPage()">Go to Payment Page</button>
          </div>
        </div>
      </div>
      <script>
        function openPopup(amount) {
  const modal = document.getElementById('chargeModal');
  modal.style.display = 'block';
  // 모달에 선택한 금액 표시
  document.getElementById('chargeAmount').innerText = `Selected Amounts: VND ${amount}`;
}

// 모달 닫기
function closePopup() {
  const modal = document.getElementById('chargeModal');
  modal.style.display = 'none';
}

// 선택한 금액으로 충전하기
function confirmCharge() {
  closePopup(); // 팝업 닫기 함수 호출
  showSuccessPopup(); // 성공 모달 띄우기
}

// 성공 메시지 모달 닫기
function closeSuccessPopup() {
  const successModal = document.getElementById('successModal');
  successModal.style.display = 'none';
}

// 성공 메시지 모달 보여주기
function showSuccessPopup() {
  const successModal = document.getElementById('successModal');
  successModal.style.display = 'block';
}

// Payment Page로 이동하는 함수
function gotoPaymentPage() {
  window.location.href = '/paymentMain';
}
// 충전 취소하기
function cancelCharge() {
  closePopup(); // 팝업 닫기 함수 호출

}

// Cancel 버튼을 눌렀을 때 충전 취소 처리
function cancelCharging() {
  cancelCharge();
  // 여기에 /charging 페이지에 머무르는 리디렉션 로직 추가
  window.location.href = '/charging';
}

// 팝업 닫기 함수
function closePopup() {
  const modal = document.getElementById('chargeModal');
  modal.style.display = 'none';
}

      </script>
      
</body>
</html>
