<!DOCTYPE html>
<html>
<head>
    <title>Upload and Scan QR Code</title>
</head>
<body>
    <h1>Upload QR Code</h1>
    <input type="file" id="qr-input" accept="image/*">
    <button onclick="uploadAndScan()">Upload and Scan</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsQR/1.3.0/jsQR.min.js"></script>
    <script>
        function uploadAndScan() {
            const input = document.getElementById('qr-input');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        const code = jsQR(imageData.data, imageData.width, imageData.height);

                        if (code) {
                            console.log("Found QR code", code.data);
                            // QR 코드 처리 로직
                            // 예: 찾은 QR 코드 데이터를 화면에 표시하거나, URL로 리디렉트
                            alert("QR Code data: " + code.data);
                            // window.location.href = code.data; // URL로 리디렉트하는 경우
                        } else {
                            alert("QR Code not found. Please try another image.");
                        }
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</body>
</html>
