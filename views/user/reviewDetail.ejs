<%- include("../partials/header") %>

<title>Review Detail</title>
<link rel="stylesheet" href="/stylesheets/reviewDetail.css">
</head>

<body>
    <div class="headerContainer">
        <div class="course_evaluation-header">
            <h3 class="courseID"><%= course.courseID %></h3>
            <h3 class="courseName"><%= course.courseName %></h3>
            <p class="lecturer"><%= course.lecturer %></p>
        </div>
        <div class="icon">
            <a href="/course_evaluation"> <ion-icon class="course_evaluation_detail-delete-icon" name="close-outline"></ion-icon></a>
        </div>
    </div>
    
    <div class="mainContent">
        <div class="review-section">
            <h2>Average Ratings</h2>
            <div class="review">
                <h3>Star Rating</h3>
                <div class="star-rating-container">
                    <div class="star-rating">
                        <% for(let i = 1; i <= 5; i++) { %>
                            <% if(i <= average.starRating) { %>
                                <span class="star filled">&#9733;</span>
                            <% } else if(i - average.starRating < 1) { %>
                                <span class="star half-filled">&#9733;</span>
                            <% } else { %>
                                <span class="star">&#9733;</span>
                            <% } %>
                        <% } %>
                    </div>
                    <p class="rating-number"><%= average.starRating ? average.starRating.toFixed(1) : 'N/A' %>/5</p>
                </div>
            </div>
            <div class="review">
                <div class="assignment-heading">
                    <h3>Number of Assignments</h3>
                </div>
                    <p><%= average.assignmentsCount ? average.assignmentsCount.toFixed(1) : 'N/A' %>/4</p>
            </div>
            <div class="review">
                <div class="exam-heading">
                    <h3>Number of Exams</h3>
                </div>
                    <p><%= average.examsCount ? average.examsCount.toFixed(1) : 'N/A' %>/4</p>
            </div>
            <div class="review">
                <div class="project-heading">
                    <h3>Number of Group Projects</h3>
                </div>
                    <p><%= average.groupProjectsCount ? average.groupProjectsCount.toFixed(1) : 'N/A' %>/4</p>
            </div>
            <div class="review">
                <div class="difficulty-heading">
                    <h3>Difficulty</h3>
                    <h5>(1 = Very Easy ~ 5 = Very Hard)</h5>
                </div>
                <p><%= average.difficulty ? average.difficulty.toFixed(1) : 'N/A' %>/5</p>
                <br>
            </div>
            </div>

            <br>
            <div class="comment-section">
                <h2>Comments</h2>

                <div class="comment-list">
                    <% evaluations.forEach(function(evaluation) { %>
                        <div class="comment">
                            <p class="enrollmentSemester">Student who took <%= evaluation.enrollmentSemester %> class</p>
                            <div class="star-rating-container">
                                <div class="star-rating">
                                    <% for(let i = 1; i <= 5; i++) { %>
                                        <% if(i <= evaluation.starRating) { %>
                                            <span class="star filled">&#9733;</span>
                                        <% } else { %>
                                            <span class="star">&#9733;</span>
                                        <% } %>
                                    <% } %>
                                </div>
                                <p class="rating-number"><%= evaluation.starRating.toFixed(1) %>/5</p>
                            </div>
                            <p class="textFeedback"><%= evaluation.textFeedback %></p>
                        </div>
                    <% }); %>
                </div>


            </div>
        </div>
    </div>
</body>

    </html>